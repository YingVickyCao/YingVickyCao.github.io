# 计算机原理

E.g., C

# 计算机语言要处理的概念：

- 程序 = 数据 + 算法  
  数据是程序使用和处理的信息  
  算法是程序使用的方法

# 编程语言

- 编程语言的演变：低级语言 -> 高级语言

```
机器语言

  ↓

汇编语言

  ↓

高级语言
```

https://zhuanlan.zhihu.com/p/88261648

机器语言：  
优点：  
（1）机器语言是低级语言 low-level），即`直接操作硬件`，如直接访问 CPU 寄存器和内存单元。另外效率高  
缺点：  
（2）可读性差：0/1。

汇编语言：  
优点：  
(1)、与机器语言相比，更可读：针对常见操作，做了 字符-0/1 的 mapping => 解决了机器语言的可读性差。  
(2)、汇编语言是低级语言。  
缺点：  
（1）、可移植性差：因为是直接操作硬件，所以汇编语言针对于针对特定的计算机处理器，要将汇编程序移植到另一种计算机上，必须使用不同的汇编语言重新编写程序。 也就是说`不同的机器或系统，对应的汇编有差异。`  
https://zhuanlan.zhihu.com/p/469950256

高级语言(high-level)：e.g., C/C++
可移植性强：=> 解决了汇编语言的可移植性差。  
在不同平台使用不同的编译器将高级语言翻译成计算机的内部语言。

C 拥有：
（1）、低级语言的效率  
（2）、`低级硬件访问`
（3）、高级语言的通用性  
（4）、可移植性

C++ 的二重性：  
（1）OOP 提供了高级抽象能力。
（2）C 提供了低级硬件访问

- 编程方法

```
过程性语言

  ↓

结构化编程

  ↓

面向对象编程（OOP）

↓

泛型编程
```

过程性语言(procedural)： e.g., Basic、FORTRAN  
强调编程的算法。  
先确定计算机应该采取的操作，然后使用编程语言来实现这些操作。程序命令计算机按照一些列程序生成特定的结果。=>一堆步骤

结构化编程(structured programming)： e.g.,C
原则 1:将分支划分结构（循环/条件语句 等）
原则 2：自顶而下（top-down）的设计。将一个大程序分解成小任务模块。
=>提高了程序的清晰度、更好维护

面向对象（OO）：e.g.,C++
强调数据。
先设计类来表示程序要处理的东西，然后设计一个使用这些类的对象的程序。
从低级组织（如类）到高级组织（如程序）的处理过程叫做自下向上(bottom-up)的编程。

泛型编程(generic promming)：e.g., C++支持泛型编程，并通过模版实现。
强调是独立于特定数据类型。
generic 是指创建独立于类型的代码。

# 1 操作系统

计算机由 CPU、主播、内存、硬盘、显示器...组成.

操作系统是一个软件，运行在计算机设备上。  
作用：
**1）管理计算机硬件设备
2）协调计算机设备之间和谐的工作。**

# 2 硬件与操作系统

计算机不同设备负责不同的事情。  
CPU：计算  
内存：临时存储数据  
硬盘：永久存储数据  
网卡：发送和接收网络数据  
声卡：播放声音  
显卡：显示图像

Android 中的三级缓存类似于计算机的内存-> 硬盘 -> 网卡。

计算机是帮助人类做事情。  
人类指挥计算机做事情。

如何指挥计算机？  
计算机非常听话，前提是听的懂。必须使用计算机能明白的语言。计算机只能识别二进制语言 0 和 1。

**3）将底层复杂的二进制操作封装的更为简单，提供操作接口。**  
对于我们而言，不需要进行复杂的二进制操作，只需要调用操作系统提供的接口就可以了。  
不同的操作系统提供的接口是 不一样的。

![os](https://yingvickycao.github.io/img/computer_principles/os.webp)

# 3 应用软件与操作系统

操作系统提供的接口，还是不方便。当要做一件的事情时候，其实要按照顺序调用多个操作系统的接口才可以完成。
所以操作起头来还是非常相当的复杂。

![os_2](https://yingvickycao.github.io/img/computer_principles/os_2.webp)

应用软件：运行在操作系统之上，将操作系统提供的接口封装得更为简单的操作。  
表现为一个按钮、一个点击、一个按键

操作系统运行在计算机设备上，应用软件运行在操作系统之伤。

我们学习编程，主要学习应用软件开发。  
所以开发软件很简单，就是按照顺序调用操作系统接口来完成 1 件事情。  
需要知道有哪些接口，完成 1 件事情的步骤。

# 4 操作系统的分类

按照操作系统运行的设备，分类：  
PC（personal compyter） 电脑上的操作系统：  
Widows 90%、  
OS X 4%、  
Liux 5%、  
Unix ...

服务器上的操作系统：配置强大  
Windows Server 20%  
Linux 80%  
其他

移动端设备上的操作系统  
Android 70% （系统架构：基于 Linux 的虚拟机）  
IOS 24% （系统架构：Unix）  
Windows 1%

# 5 软件开发

软件开发 ？开发运行在操作系统上的应用软件。

## 软件开发，按平台分类

桌面开发：开发运行在桌面上的软件。窗体软件。  
 Web 开发： 网页开发、网站开发  
 移动开发：开发运行在移动设备上的软件。手表、手机、平板。

## 为什么选择 IOS ？

系统开源  
 好处：  
 厂家可以定制系统。  
 可以看到系统实现原理。

缺点：  
 改后，面目全非。可能操作系统接口都改了，那么 app 可能并不能在所有设备上都能运行。  
 app 轻易能破解。

不开源：  
 缺点：  
 看文档，或 猜系统内部实现原理。  
 别人不能改。  
 app 在各个手机上都能用。  
 app 不能破解。

![io_choose](https://yingvickycao.github.io/img/ios/ios_choose.webp)

# 6 学习 IOS 的准备

编程语言：C 语言、C++（可选）、Objective-C、Swift  
开发工具：XCode  
计算机系统：OS X  
IOS 证书：调试证书、发布证书(99$/1 年, 每卖一个软件，30%给苹果)

# 7 IOS 历史

- Iphone 1，2017
- Iphone 4，2020 年， 首次配备了 Retina （视网膜屏幕），新增了前置 30 万像素摄像头，跨时代意义的产品。
- Iphone 5S，首次配备了 Touch ID 指纹识别功能
- Ipone 6/plus，首次配备了 NFC，所以支持了 Apple Pay。

# 8 什么是程序？

程序是 1 堆可以被 CPU 识别并执行的指令的集合。

# 9 什么是软件开发？

编写 1 堆指令，让计算机去识别病按照指令的要求去做事情。  
计算机只能识别二进制指令，并与其交流。

# 10 编程语言的发展历史：

- 机器语言：二进制指令。  
  写的代码全是 01100 这样的二进制代码，很难理解，因此只有专业人员才能理解。并且不同的硬件设备具有不同的指令，因此可移植性很差。<br/><br/>

- 汇编语言：用英文单词和符号来编写。  
  汇编语言因为直接操作硬件，要使用汇编语言来编写语言，必须非常了解计算机的硬件。不同的硬件接口不同，因此用汇编语言写的程序很难移植。符号量很大很难有记忆。因此，并且学习难度很大。<br/><br/>

- 高级语言：  
  与分类的语言更为接近，编写思路与风格更接近人的思维。程序员不需要了解硬件底层知识，因为它已经帮你封装好了。编译器负责把写的单词和符号，转换成计算机可识别的二进制指令。再将二进制指令交给 CPU。因此程序员不需要太关心底层的实现。  
  高级语言，如 C、C++、Objective-C、Java 等。<br/><br/>

  高级语言的一般编写执行步骤：  
  Step 1 ：使用英文单词和符号编写符合规范的源代码。  
  Step 2 ：使用编译器将源码编译为二进制指令。  
  Step 3 ：讲二进制指令交给 CPU 执行。

  ![os](https://yingvickycao.github.io/img/computer_principles/software_design_history.webp)

汇编语言基本上等同于机器语言。可以理解如何从高级语言转换为汇编语言。建议学习汇编语言。  
编译器有的是把一种高级语言，编译成另一种高级语言，例如 Kotlin-> Java  
编译器是把高级语言直接翻译成机器语言，有的是先把高级语言翻译成汇编语言，最后汇编语言到机器语言。  
https://www.kmw.com/news/2878648.html
https://zhuanlan.zhihu.com/p/70949843

# 11 计算机三大件：

CPU：中央处理器 - 处理数据，负责计算。协调其他硬件互相和谐的工作。  
操作系统直接与 CPU 打交道，CPU 再指挥其他硬件操作。  
内存：存储数据。临时存储数据，但是数据的存取效率相对较高。存储在电子元件中。电子式  
硬盘：存储数据的。永久存储数据，但是数据的存取效率相对低下。存储效率与转速有关（转/分）。机械式。

CPU 为什么不直接读取硬盘？  
因为硬盘的数据存取效率比较低，那么执行的速度也慢。  
内存越大，能同时运行的程序越多。

# 12 程序是如何运行的？

程序在运行之前是存储在硬盘中的。  
当我们运行程序时，CPU 会将程序从硬盘复制到内存中。  
CPU 读取内存中的程序的代码来运行程序

E.g., C software

![os](https://yingvickycao.github.io/img/computer_principles/software_running_model.webp)

# 13 程序要如何处理数据？

1： 将 QQ 运行起来。  
程序在运行之前存储在硬盘中，当我们运行 QQ 程序后，这个程序被运行在内存中。

2： 当点击登录按钮，QQ 程序应该做的事情？  
（1）读取输入的 QQ 号码  
（2）读取输入的 QQ 密码  
（3）将读取到的号码和密码发送给腾讯服务器。

QQ 程序将号码和密码发送给腾讯服务器之前，这个 QQ 程序需要将号码和密码存储吗？要存储。  
程序其实就是在处理数据。

： 程序要如何处理数据？  
（1）程序自己要不要把这些数据存储起来？肯定要。（先握东西在自己手里，才能交给第二个人）  
（2）存储在哪里？内存。因为程序自己就在内存中。  
（3）怎么存储？

![software_how_handle_data](https://yingvickycao.github.io/img/computer_principles/software_how_handle_data.webp)

# 14 如何将数据存储在内存中？

（1）我们为什么要存储数据？  
因为这个数据我们后面要用。  
（2）如何将数据存储在内存中？  
先在内存中挖 1 个坑，然后将这个数据存储在这个坑中。当我们要用的时候，只要找到这个坑就可以存储在坑中的数据。  
（3）每 1 个坑在内存中都有 1 个独一无二的地址，是 1 个十六进制的表示，0x...  
通过这个地址就可以找到这个坑，使用这个坑中的数据。  
但是，地址是很难记忆的。为了解决问题，我们在挖坑的时候，就要为这个坑指定别名。  
挖坑的同时，  
a）地址自动就有，系统自动分配。  
b) 要自己指定这个坑的别名。

![software_how_store_data](https://yingvickycao.github.io/img/computer_principles/software_how_store_data.webp)

(4) 在挖坑的时候，必须要指定这个坑的类型。  
坑的类型决定了可以往这个坑存储的数据的类型。  
如果指定这个坑是 1 个整型坑，那么这个坑中就只能存储整型的数据。否则就有可能发生坑毁人亡的悲剧。

5：常见的坑的类型  
E.g.，C 中，int、float、double、char  
它们是坑的四种类型，决定可以存储什么类型的数据，那么数据的范围也定了。  
如果存储的数据，不是这个范围的数，就会有问题。

int : -2147483648 ~ + -2147483647 之间的整数。  
如果存储的数据不是这个范围的数，就会有问题。

float ：存储有效位数不超过 7 位的小数。  
有效位数：去掉小数点.的位数。  
99.123 ok  
99.1234567 ok  
99.123456789 not ok  
如果存储的小数的有效位数超过了 7 位，那么超出的部分无法精确存储。只能精确存储前面的 7 位。

double：存储有效位数不超过 16 位的小数。

char：只能存储单个字符。A B C a b X

6：在内存当中，存储数据的专业话术  
如果我们要在内存中存储数据。  
（1）就要在内存中开辟 1 块空间。  
（2）在开辟这个空间的同时，要指定这个空间的别名和数据。  
（3）这个空间的类型决定了这个空间中可以存储的数据的类型。

常见的空间类型：  
int 整型  
float 单精度浮点型  
doule 双精度浮点型  
char 字符型

float 和 double 称称为浮点型或实型。

# 15 变量

（1）变量  
什么是变量？  
变量就是内存中开辟的用来存储数据的那个内存空间。  
所以，变量是用来存储数据的。

什么是变量的值？存储在变量所代表的那块空间中的数据。

**什么是变量的名？为变量所代表的那块空间取的别名。**

坑 == 开辟的内存空间 == 变量名

变量的类型？变量所代表的那块空间的类型

**变量的本质：在内存中存储数据的那块空间。**

（2）所以，如果我们要在内存中存储数据，就只要声明一个变量。  
声明 1 个变量，其实就是在内存中开辟了一块空间来存储数据。

## 如何声明变量

数据类型 变量名称；  
数据类型 就是 空间的类型：int、float、double、char

E.g.,

```
int num;
```

当 CPU 执行这句代码时，CPU 会在内存中开辟 1 块空间，空间的类型时 int，空间的名字是 num 。  
用这个空间来存储数据，因为是 int 类型的，那么这个空间中只能存储 int 范围内的 整数，否则坑毁人亡。

声明一个变量，就是在内存中开辟 1 块指定类型和指定别名的空间。  
变量就是这个空间。

## 往变量所代表的空间中存储的数据。

格式语法：  
变量名 = 数据;

```
int num;
num = 100;
```

=是赋值号。  
赋值符号的作用 ？将右边数据，存储到左边变量所代表的空间中去。

# 16 串行（Sequential）vs 并发（Concurrency）vs 并行（Parallelism）

https://blog.csdn.net/kingcoding/article/details/107293131
处理效率：串行 < 并发 < 并行

```
Example：
并发 = 两个队列和一台咖啡机。
并行 = 两个队列和两台咖啡机。
串行 = 一个队列和一台咖啡机。
```

```
Example : 要计算下面这三个表达式的值，并显示出结果。

A = 1+2
B = 20/5
C = 7*8

在编写代码的时候，我们可以把这个过程拆分为四个任务：
任务 1 是计算 A=1+2；
任务 2 是计算 B=20/5；
任务 3 是计算 C=7*8；
任务 4 是显示最后计算的结果。


串行：单线程，分四步按照顺序分别执行这四个任务
并行：多线程，只需要两步。第一步，使用三个线程同时执行前三个任务；第二步，再执行第四个显示任务。
```

- 串行
  有单个线程按顺序执行多个任务，且一次只能做一件事情。

- 并发
  多个任务在同一个 CPU 上交替执行。同一个时间点，只有一个任务执行。  
  缺点：系统调度和上下文切换需要额外性能开销。

- 并行，即并行处理  
  计算机中的并行处理就是同一时刻处理多个任务。  
  多核 CPU / 多个处理器 使得并行变得可能。
  **也就是通常所说的 多线程并发处理任务**

# 17 线程 VS 进程

- 线程不能单独存在，它是由进程来启动和管理的。
- 什么是进程？  
  **一个进程是要给程序的运行实例。**  
  展开来说，启动一个程序时，操作系统为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，把这样的一个运行环境叫进程。
