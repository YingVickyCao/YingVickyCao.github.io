# 访问者模式（ Visitor Pattern ）

# 1 定义

> 当想要为一个对象的组合增加新的能力，且封装并不重要，就使用访问者模式

# 2 场景

Example：餐厅新需求：在订餐之前，客户会询问营养信息，甚至详细到每种原料的营养成分

# 3 How to use

访问者来访：访问者必须参观组合内的每个元素；这样的功能是在导游（Traverser）对象中，访问通过导游的引导，收集组合对象中的状态，一旦状态被收集了，客户就可以让访问者对状态进行各种操作。

![Visitor_Pattern](https://yingvickycao.github.io/img/Visitor_Pattern.jpg)

demo：  
没有组合模式；  
Visitor = Traverser

# 4 优点

- 允许对组合结构加入新的操作，而无需改变结构本身。
- 想要加入新的操作，相对容易。
- 访问者所进行的操作，其代码是集中在一起的。

# 5 用途

当采用访问者模式时，会打破组合类的封装

# 6 缺点

因为游走的功能牵涉其中，所以对组合结构的改变会更加困难。
